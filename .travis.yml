language: python
python:
- '3.7'
services:
- postgresql
env:
  global:
    - DJ_DEBUG=False
    - DATABASE_URL=postgres://postgres@localhost/travisdb
    - secure: "k+Htit0BWLTHyzX3CPEiiahwwDBYF/w83RV+CGQtmXl85gS60Vse13MdE4mdYScUId8t9Vlv2LYp91FzuX446hCvLsYNI55hD7hVFUsRHZTplp5GAaE40G9q8WVwHvrSQkbHly6AVwec7OE9zBDIdrAhL4DsTqSgRr6CzSjUwpAbEzl7vL8o7jd+gkInwGC6pFx3UPJIN5QQBhIEdT7aelBBGLEhW9JebFR1Lzu+xegwXl4z72f4uC7MvA3RQmq5H6zZsEXRXXDpH2svzF4n93j1HMmgRvJ5R4mRYG2NF3c7LYE6LTgHqw/AOLE1xTsvQIxfCYYTGG/cOBvh3G65eGpISdpF4RVJJkjgmgOY2ehqoNonQkr91qf+k70L8ePSUh87hVmx5z6vhXT/dSmsm0ruq0bgmaRpBIX4uuJZoB8GEd6IRKYtb51aJxiVVwdq6PaMFhNybjCOnUqr0Bgo9sGTeZMgWH7P5jfbK/+iPEFfi6qzJtTv8gFB4mGxEm9Mjc0uQRCI++k59YM+XPMyoRp8wIEYPpe+MsRK/Ha6nI3YhCj9yA/sW+LQF5IStaCPljeN5MeMib/5z2Ex+IZ0WIfeYMj98lTGW/VSbP0hvK+oRsZpPDJ/3M7lRdwkkn+XmkMjO8ot7ZKSpXl8EoitqvhHz/qpp8bUxO1n9oPF/1U="
    - secure: "tOqeVj+0E/eK3TaKwoX3baZzThXNcU0/CmyM9USaebOT92af+LiPVnVcg9Uo/q4rIQI5HVR1d9EFyWvFZ/NeCLldauoPj+2j8cPT5I3PfWKATr0r+ADEKw5odXc7b6JxjRp6kuc5hqoiFzgDx4leIJ1/2v53VmGXGfGONQxQ6cWSSzeI5IA0kSgwAQkxCcetUHOuQMge50EkDzGgd7sxe+CjV7BQB6EFuHAOGhV/wnPo8IeHK/e+lf2v+eMy4UKxJBLPiZElBiCfSnRguQvMa3Zmi6in68/RqFjcUEPNk+QgB0kdzCI8a6LJNup6/K9smted9yFbuGTRUkKO+kCxyucgnMHho2hUYxVJZeB4KUmu0PlrFo09oxsFNXrw4nCJLUyNRiigu58BXyk3MnxBruDo/V573d+yTxGW1nNFkloz/8loy3WFXrn9tajTyyRIQkbMjqyOmkMyhoh+L79ewD3F4pS8+1pg2XhaAks3QtaZ0eTW6/w63UldEtPCscU9DLWX/DoWXGGAIQcktlFJeNqw44xeUUHEfM5bIPhnQyDwT/mRWaxS7LJELmKwUiCP5PM9gnvzgJSgMPx/1hintT4A3zzuidpjSxEBgZLRwbtQc5a/WtcXHFnKGrY54Z3kQ8jgA76sNDLRrFnLfbC7BgKoRVEi3P8H2oF0JB6wbCg="
    - secure: "ogxVfFJ415+96CD8UYezQTj00wkOy/fl+UZfU/Tpu3P3NRD94srfDqYJuP6E8PtNTDhyoWtz0d4g2QG2z8Yhu3F5Rd2OmAiiHqDvSTA+5CHpE9kRb3DwfN54mTtIiMqWc6b/hUPNsH7KMzQ9TR8OAoOxpswnJupyk7+cv1W+t3QxqoXhI+XVpRuQ96ET8nbJtS8n00ucN457GFcddxOrNQPzidT2Njk+yUy7dXKJ+ssWAnXCFn8w8HipC2p1UVnNjq7kwNttyDmIzW4NNYxRkvuZW2Uqs9Ug+YxAmqIC9ilWhdgDtfBsEgCA+qSRYT+OZTst4JLxLxqy+eZiaSNnbk8H3dYG+PUDXSOw4yIGgsalUwxYQISSr/9eg7SzMUIqKQlObwD0ep0W4TQ2BNLLnVs94PQWjAzpuyTmMlG+A96KN30MfOLzsdKHiX6ipx+oqh+euOJFphBsDVFVoi8Ruk407h2J2VI1D/BcO3uCYHdtifqS5vEOSBpP/aU+gYilgT254AOOcoBqGkrD/rn7BcZmXi+oh7fXpX2C2WNOznI5UAFw5hF/e5J11Q37SQm4Liwg02TKOsVAAxIH9zeDAVMuTZA3DSbsrKGjGQWkw03ByvL4hQY0JSC+5akSVNdIKRNj5pIcmZkIEx0txoZYWM+Jfi0eQ+33ZtM1xzMxDbY="
install:
- pip install -r requirements-travis.txt
before_script:
- psql -c 'create database travisdb;' -U postgres
script:
- python manage.py makemigrations
- python manage.py migrate
- python manage.py test --keepdb
deploy:
  provider: heroku
  api_key:
    secure: NvmPuUgDMOuzQeo++KbZ99gExKoE5CiyjMSsHcl1KAWw+Wudwn0w9fAzpeWmoud+P/0rc2mPL6H1HbYsZoroeRQmv4187peP82OaD/n8AoaoaxbhFCHZrWHF4uUR8VlYnO+wKyMcWjjqklPahJDxf+0H2nl638mZuj/RXKCuQHbEX0ipfCtrrUVeqEolpVtWUdE6c3XVUsR5viXlnD55biKXfhK+6B5CkqGp0Oqg+0O1ncrAHFusolppt1cHqmvaBJfZIrBH8LnCtzzRN7bT7/SHmGYhEzCAw/Mwmn8THuwnI/4sYH6shXO4r+2uI8qk9jp+UMUz2+UeoJ5jt33ED53QJyeF1GS7wOF1YNLXs3zlG9RgWTL12kGwsb4eVjGr+rjriJUlZWc8ClmG857SQgxMe+Q7CCBCOUlbbVVCJrzbct2/sNlFNwnw2B5fxz6QkUqcRsaMCMJ5j5IkWTISTYH3RFW/vor25PGRT/pggcCcf7XgCpfbiyoaJ83DVQho7MU8lKdLM3hs8BqeT34fCsWtCc6P+9rNqhB66MzoXYKnPGx8plSNpXEWe+RQFASyAIqM6C86QrkmNZM8fuF/MD8qLg2LxAEbDKdgrz0WUK3lMpvN9IqyW2+IxFNVw/x5/HIFv/7EuM3fH8fqERxUOf92EiZNdCVXa5QHwe79ihU=
  app: project102codecrkrs
  on:
    repo: uva-cs3240-s20/project-102-code_crkrs